{include file="common/head" /}

<main>
    <!-- hero area start -->
    <section class="hero-area hero-area-2" data-background="__CDN__/assets/img/slider/home2/home2.jpg">
        <div class="hero-slider hero-style-2">
            {volist name='$banner' id="vo"}
            <div class="hero-item hero-height p-relative">
                <div class="tpslider__thumb"><img src="{$vo.image}" alt=""></div>
                <div class="hero-item-box">
                    <div class="hero-item-inner">
                        <div class="container-fluid">
                            <div class="row hero-plr-225">
                                <div class="col-xl-12">
                                    <div class="tpslider__content" style="margin-bottom:160px">
                                        <h2 class="tphero__title">{$vo.title}
                                            <br>
                                            <span class="tphero__subtitle has-before-hero">{$vo.desc}</span>
                                            <!-- 轮播图标题 -->
                                        </h2>
                                        <div class="hero-btn">
                                            <a class="tp-btn tp-btn-shine-effect" href="{$vo.url}">About Us</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {/volist}
        </div>
    </section>
    <!-- hero area end -->

    <!-- features-2 area start -->
    <section class="features-area-2 pt-135">
        <div class="container">
            <div class="row">
                <div class="col-xl-5 col-lg-5 col-md-12">
                    <div class="tpfeatures-section__wrapper mb-40" style="text-align: justify;text-justify: distribute">
                     <span class="section-sub-title has-before wow fadeInLeft" data-wow-duration="1s"
                           data-wow-delay=".3s">About Us</span>
                        <h5 class="section-title wow fadeInLeft" data-wow-duration="1s" data-wow-delay=".5s">The Home of
                            On Hong</h5>
                        <p style="font-size:18px;"> The Home of On Hong is a well-known charity foundation in Asia dedicated to animal protection. The members of the organization are all senior public welfare persons in the field of animal protection. The foundation was registered in Hong Kong. The Home of On Hong has the mission of promoting the cherishing of life, advocating spiritual civilization and promoting the humanitarian spirit, and safeguarding the rights of animals to survive and not to be abused. </p>

                        <div class="tpfeatures__btn wow fadeInLeft" data-wow-duration="1s" data-wow-delay=".7s">
                            <a class="tp-btn-black tp-btn-shine-effect" href="{:url('@index/about/index')}">About Us</a>
                        </div>
                    </div>
                </div>
                <div class="col-xl-7 col-lg-7 col-md-12 wow fadeInRight" data-wow-duration="1s" data-wow-delay=".5s">
                    <div class="row ">
                        <div class="col-xl-6 col-lg-6 col-md-6">
                            <div class="tpfeatures d-flex mb-60 ml-36">
                                <div class="tpfeatures__icon">
                                    <img src="__CDN__/assets/img/icon/features-1.png" alt="">
                                </div>
                                <div class="tpfeatures__content">
                                    <!--<h3 class="tpfeatures__title"><a href="">Rescue</a></h3>-->
                                    <p>Provide life-saving medical treatment to injured or sick dogs </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-6 col-lg-6 col-md-6">
                            <div class="tpfeatures d-flex mb-60 ml-15">
                                <div class="tpfeatures__icon">
                                    <img src="__CDN__/assets/img/icon/features-2.png" alt="">
                                </div>
                                <div class="tpfeatures__content">
                                    <!--<h3 class="tpfeatures__title"><a href="">Find</a></h3>-->
                                    <p>Distribute vaccinations and deworming pills</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-6 col-lg-6 col-md-6">
                            <div class="tpfeatures d-flex mb-60 ml-36">
                                <div class="tpfeatures__icon">
                                    <img src="__CDN__/assets/img/icon/features-3.png" alt="">
                                </div>
                                <div class="tpfeatures__content">
                                    <!--<h3 class="tpfeatures__title"><a href="">Build and repear</a></h3>-->
                                    <p>Provide food material 
                                        Give educational talks at school to change the negative perception of stray </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-6 col-lg-6 col-md-6">
                            <div class="tpfeatures d-flex mb-60 ml-15">
                                <div class="tpfeatures__icon">
                                    <img src="__CDN__/assets/img/icon/features-4.png" alt="">
                                </div>
                                <div class="tpfeatures__content">
                                    <!--<h3 class="tpfeatures__title"><a href="">Education</a></h3>-->
                                    <p>Spay and neuter as many dogs as possible to get the population under control</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- features-2 area end -->

    <!-- Volunteers area start -->
    <section class="volunteers-area-2 pb-235 pt-90"
             data-background="__CDN__/assets/img/about/home1/about-background.png">
        <div class="container">
            <div class="row">
                <div class="col-xl-7 col-lg-7">
                    <div class="volunteers-2-section__wrapper tpvolunteers-2 pl-65 mt-40 wow fadeInRight"
                         data-wow-duration="1s" data-wow-delay=".5s">
                        <!--<span class="section-sub-title has-before"> Product</span>-->
                        <!-- 主标题 -->
                        <h3 class="section-title">{$recommendInfo.title}</h3>
                        <!-- 副标题 -->
                        <p>{$recommendInfo.subtitle}</p>
                        <div class="tpvolunteers-2-btn">
                            <!-- 点击按钮查看该项目详情 -->
                            <a class="tp-btn tp-btn-shine-effect"
                               href="{:url('@index/project/detail',['id'=>$recommendInfo.id])}">View Project</a>
                        </div>
                    </div>
                </div>
                <style>
                    .btnCur {
                        background: #121212 !important;
                        border-color: #121212 !important;
                        color: #fff !important;
                    }
                </style>
                <div class="col-lg-4" id="target">
                    <div class="right-padding pl-25">
                        <!-- 在此处调用支付，填写表单 -->
                        <div class="sidebar__widget-contact" id="chosePrice">
                            <h3 class="sidebar__widget-title donation-details contact">{$recommendInfo.pay_title}</h3>
                            <span style="text-align: justify;text-justify: distribute;">{$recommendInfo.pay_desc}</span>
                            <div style="font-size: 50px; text-align: center;margin: 40px; font-weight: bold;"
                                 id="payPrice">${$recommendInfo.default_price}
                            </div>
                            <div>
                                <div class="donation-payment-method d-flex flex-wrap justify-content-start">
                                    {volist name='$recommendInfo.pay_list' id="vo"}
                                    <button style="width: 45%;margin-bottom: 10px;" class="payBtnList"
                                            onclick="payPrice(this,{$vo.pay_fee})" type="button">${$vo.pay_fee}
                                    </button>
                                    {/volist}
                                    <button style="width: 45%;margin-bottom: 10px;" class="payBtnList"
                                            onclick="randomPrice(this)" type="button">Random
                                    </button>
                                </div>
                            </div>
                            <span class=" ">Please be aware that a fixed transaction fee of {$recommendInfo.rate *100}% applies when using our third-party payment tool. Consider adding a tip to cover these fees and support our website. Thank you for your support!</span>
                            <div class="sidebar-btn">
                                <button class="tp-btn tp-btn-shine-effect" onclick="payNow()" style="width: 100%;">
                                    DONATE NOW
                                </button>
                            </div>
                        </div>
                        <div class="sidebar__widget-contact" id="payFrom" style="display:none;">
                            <i class="fa-regular fa-arrow-left"
                               style="font-size: 20px;margin-bottom: 10px;cursor: pointer" onclick="goBack()"></i>
                            <h3 class="sidebar__widget-title donation-details contact">{$recommendInfo.pay_title}</h3>
                            <span class=" ">{$recommendInfo.pay_desc}</span>
                            <div style="font-size: 50px; text-align: center;margin: 40px; font-weight: bold;"
                                 id="payPalPrice">${$recommendInfo.default_price}
                            </div>
                            <div id="payPalModel"></div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </section>
    <script src="https://www.paypal.com/sdk/js?client-id=AXbo4zK3y_cpZa6yw7tDMjffKU-MjdlCOXN_5fTRj_821zwCqoG1942sfwpspHBM3N8xvz7hwioxmsFd"></script>
    <!--    <script src="https://www.paypal.com/sdk/js?client-id=AblO0r95LtYofvhX0hmdBZQMQrh6ZmofgPvQjNNGkmjLZ1GT-Y7rfLzjygxUoObu7y_T4d8eES0yWNTc"></script>-->
    <script>
        let PayPrice = {$recommendInfo.default_price};
        ttq.track('ViewContent', {
            "value": '{$recommendInfo.default_price}', // number. Value of the order or items sold. Example: 100.
            "currency": 'USD', // string. The 4217 currency code. Example: "USD".
            "contents": [
                {
                    "content_id": "{$recommendInfo.id}", // string. ID of the product. Example: "1077218".
                    "content_type": "product", // string. Either product or product_group.
                    "content_name": "product_{$recommendInfo.id}", // string. The name of the page or product. Example: "shirt".
                    "price": '{$recommendInfo.default_price}', // number. The price of a single item. Example: 25.
                }
            ]
        })
        function goBack() {
            $('#chosePrice').show()
            $('#payFrom').hide()
        }

        function createPayPalOrder(price) {
            $('#payPalModel').html('')
            paypal.Buttons({
                createOrder: function (data, actions) {
                    ttq.track('AddPaymentInfo', {
                        "value": price, // number. Value of the order or items sold. Example: 100.
                        "currency": 'USD', // string. The 4217 currency code. Example: "USD".
                        "contents": [
                            {
                                "content_id": "{$recommendInfo.id}", // string. ID of the product. Example: "1077218".
                                "content_type": 'product', // string. Either product or product_group.
                                "content_name": 'product_{$recommendInfo.id}', // string. The name of the page or product. Example: "shirt".
                                "price": price, // number. The price of a single item. Example: 25.
                            }
                        ]
                    })
                    ttq.track('InitiateCheckout', {
                        "value": price, // number. Value of the order or items sold. Example: 100.
                        "currency": 'USD', // string. The 4217 currency code. Example: "USD".
                        "contents": [
                            {
                                "content_id": "{$recommendInfo.id}", // string. ID of the product. Example: "1077218".
                                "content_type": 'product', // string. Either product or product_group.
                                "content_name": 'product_{$recommendInfo.id}', // string. The name of the page or product. Example: "shirt".
                                "price": price, // number. The price of a single item. Example: 25.
                            }
                        ]
                    })
                    // 创建订单
                    return actions.order.create({
                        purchase_units: [{
                            amount: {
                                value: price // 订单金额
                            }
                        }]
                    });
                },
                onApprove: function (data, actions) {
                    // 支付批准后的回调
                    return actions.order.capture().then(function (details) {
                        // 支付成功后的逻辑
                        var id = details.id;
                        var email_address = details.payer.email_address;
                        var country_code = details.payer.address.country_code;
                        var given_name = details.payer.name.given_name;
                        var payer_id = details.payer.payer_id;
                        var orderId = details.purchase_units[0].payments.captures[0].id;
                        var status = details.purchase_units[0].payments.captures[0].status;
                        // 可以在这里处理订单信息等
                        if (details.status == "COMPLETED") {
                            // 支付成功
                            let ttclid = getCookie('ttclid'); // TikTok Click ID
                            let _ttp = getCookie('_ttp'); //Cookie id
                            $.post('/api/order/payPal', {
                                project_id: "{$recommendInfo.id}",
                                email_address: email_address,
                                country_code: country_code,
                                given_name: given_name,
                                payer_id: payer_id,
                                order_id: orderId,
                                status: status,
                                pay_id: id,
                                price: PayPrice,
                                ttclid: ttclid,
                                _ttp: _ttp,
                            }, function (data) {
                                if (data.code) {
                                    alert('Payment successful');
                                    setTimeout(function () {
                                        fbq('track', 'Purchase', {value: PayPrice, currency: 'USD'});
                                        gtag('event', 'conversion', {
                                            'send_to': 'AW-16482517787/yejoCPCHn5oZEJuGvbM9',
                                            'value': PayPrice,
                                            'currency': 'USD',
                                            'transaction_id': data.data
                                        });
                                        location.reload()
                                    }, 2000)
                                }
                            })
                        }

                    });
                },
                onError: function (err) {
                    // 支付发生错误时的处理逻辑
                    console.error(err);
                    alert('An error occurred, please try again.');
                }
            }).render('#payPalModel');
        }

        function getRandomInt(min, max) {
            min = Math.ceil(min);
            max = Math.floor(max);
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        function randomPrice(obj) {
            $('.payBtnList').removeClass('btnCur')
            $(obj).addClass('btnCur')
            let price = getRandomInt({$recommendInfo.min_fee}, {$recommendInfo.max_fee});
            price = price + price * ('{$recommendInfo.rate}' * 1)
            $('#payPrice').html('$' + price)
            $('#payPalPrice').html('$' + price)
            PayPrice = price;
        }

        function payPrice(obj, price) {
            $('.payBtnList').removeClass('btnCur')
            $(obj).addClass('btnCur')
            price = price + price * ('{$recommendInfo.rate}' * 1)
            $('#payPrice').html('$' + price)
            $('#payPalPrice').html('$' + price)
            PayPrice = price;
        }

        function payNow() {
            $('#chosePrice').hide();
            $('#payFrom').show();
            fbq('track', 'initiateCheckout')
            fbq('track', 'Donate')
            createPayPalOrder(PayPrice)
        }

        function getCookie(name) {
            let cookie = {};
            document.cookie.split(';').forEach(function (el) {
                let [k, v] = el.split('=');
                cookie[k.trim()] = v;
            })
            return cookie[name];
        }

        // 初始化 PayPal 按钮

    </script>
    <!-- volunteers area end -->


    <!-- about area 3 start -->
    <section class="about-area-3 p-relative" style="padding-top: 100px;">
        <div class="about-bg-3" data-background="__CDN__/assets/img/about/home2/home2-map.png"></div>
        <div class="container">
            <div class="row">
                <!-- <div class="col-xl-12 col-lg-12 col-md-12">
                   <div class="about-3-img wow fadeInUp" data-wow-duration="1s" data-wow-delay=".5s">
                      <img src="assets/img/slider/home3/home3-img.jpg" alt="">
                   </div>
                </div> -->
            </div>
            <div class="row align-items-center">
                <div class="col-xl-6 col-lg-6 col-md-12 col-12">
                    <div class="about-area-wrapper">
                        <h3 class="section-title">A little help can change a stray animal's world.</h3>
                    </div>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-6 col-12">
                    <!-- <div class="about-area-text">
                       <p>Charity is the act of giving help to those in need of it. it is a humanitarian act.</p>
                    </div> -->
                </div>
                <!-- 点击按钮查看全部项目    -->
                <div class="col-xl-3 col-lg-3 col-md-6 col-12">
                    <div class="about-comment justify-content-md-end d-flex">
                        <div class="">
                            <a href="{:url('@index/project/index')}">
                                <p style="background-color: black;padding: 30px;border-radius: 10px; font-size: 20px;"
                                   class="tpslider__peragraph">All Projects
                                </p>
                            </a>

                        </div>
                    </div>
                </div>
            </div>
            <style>
                .ellipsis {
                    display: -webkit-box;
                    overflow: hidden;
                    text-overflow: ellipsis;
                    -webkit-line-clamp: 2; /* 控制最大行数 */
                    -webkit-box-orient: vertical;
                }
            </style>
            <div class="row tp-gx-20">
                <div class="about-bg-3-bottom"></div>
                {volist name="projectList" id="vo"}
                <div class="col-xl-4 col-lg-4 col-md-6">
                    <div class="about-card-box">
                        <div class="card-item">
                            <div class="tpcard__wrapper white-bg">
                                <div class="tpcard__img" style="height: 263px">
                                    <a href="{:url('@index/project/detail',['id'=>$vo.id])}"><img
                                            src="{$vo.cover_image}" alt=""></a>
                                </div>
                                <div class="tpcard__content">
                                    <h4 class="tpcard__title ellipsis" style="margin-bottom: 18px;height: 60px"><a
                                            href="{:url('@index/project/detail',['id'=>$vo.id])}">{$vo.title}</a>
                                    </h4>
                                    <div class="tpcard__progresss">
                                        <div class="progress">
                                            <div class="progress-bar" role="progressbar" aria-label="Example with label"
                                                 style="width:{$vo.rate+3}%;" aria-valuenow="25" aria-valuemin="0"
                                                 aria-valuemax="100">
                                                <span>{$vo.rate}%</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tpcard__bottom d-flex justify-content-between">
                                        <div class="tpcard__details">
                                            <span class="subtitle">our goal</span> <br>
                                            <span class="sale">${$vo.goal}</span>
                                        </div>
                                        <div class="tpcard__details">
                                            <span class="subtitle">raise</span> <br>
                                            <span class="sale">${$vo.minimum}</span>
                                        </div>
                                        <div class="tpcard__details">
                                            <span class="subtitle">people</span> <br>
                                            <span class="sale">${$vo.maxmum}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                {/volist}

            </div>
        </div>
    </section>
    <!-- about area 2 end -->

    <!-- volunteers area 4 start -->
    <section class="volunteers-area-4 p-relative pb-50 pt-260">
        <div class="volunteers-bg-4" data-background="__CDN__/assets/img/about/map-volunteers.png"></div>
        <div class="container">
            <div class="row">
                <div class="col-xl-5 col-lg-5 col-md-12">
                    <div class="volunteers-section-4 wow fadeInLeft" data-wow-duration="1s" data-wow-delay=".5s">
                        <div class="tp-section-title-wrapper">
                            <span class="section-sub-title has-before"> Volunteers</span>
                            <h3 class="section-title ">Unselfish love of one's fellow men</h3>
                        </div>
                        <p>Charity is the act of giving help to those in <br> need of it. it is a humanitarian act. it
                            involves <br>
                            giving money goods or love</p>
                        <div class="volunteers-list">
                            <ul>
                                <li><span><i class="fas fa-check"></i></span>Rescue strays.</li>
                                <li><span><i class="fas fa-check"></i></span>Rehome strays.</li>
                                <li><span><i class="fas fa-check"></i></span>Promote education.</li>
                            </ul>
                        </div>
                        <div class="tpvoluntrees-3-btn">
                            <a class="tp-btn tp-btn-shine-effect" href="{:url('@index/about/index')}">About
                                foundation</a>
                        </div>
                    </div>
                </div>
                <div class="col-xl-7 col-lg-7">
                    <div class="volunteers-box p-relative">
                        <div class="volunteers-item vol-item-left wow fadeInUp" data-wow-duration="1s"
                             data-wow-delay=".5s">
                            <img src="__CDN__/assets/img/about/vol-box-1.png" alt="">
                            <span>3,860+</span>
                            <p>Satisfied Clients</p>
                        </div>
                        <div class="volunteers-item vol-item-top wow fadeInUp" data-wow-duration="1s"
                             data-wow-delay=".3s">
                            <img src="__CDN__/assets/img/about/vol-box-2.png" alt="">
                            <span>5,000+</span>
                            <p>Successful Rescues</p>
                        </div>
                        <div class="volunteers-item vol-item-bottom wow fadeInUp" data-wow-duration="1s"
                             data-wow-delay=".7s">
                            <img src="__CDN__/assets/img/about/vol-box-3.png" alt="">
                            <span>180+</span>
                            <p>Collaborative Rescue Communities</p>
                        </div>
                        <div class="volunteers-item vol-item-right wow fadeInUp" data-wow-duration="1s"
                             data-wow-delay=".5s">
                            <img src="__CDN__/assets/img/about/vol-box-4.png" alt="">
                            <span>90+</span>
                            <p>Team Member</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- volunteers area 4 end -->


</main>
{include file="common/footer" /}